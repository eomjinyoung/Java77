# DB 모델링
## 모델링
생각하는 바를 글과 그림으로 표현하는 것

## DB 모델링
데이터가 중복되지 않게 구조를 설계하는 것

## 데이터 중복의 문제점
* 데이터가 일치하지 않는 문제 발생 --> 업무에 지장을 초래.
* 메모리 낭비 
* 유효하지 않는 데이터를 넣을 수 있다.

## 데이터 중복 해결책
* DB 정규화를 통해 데이터 중복을 제거한다.
* 글과 그림을 통해 데이터 구조의 이해도를 높인다.

# DB 모델링 절차
1. 분석/설계를 통해 엔티티(테이블)를 식별한다.
- 모든 엔티티는 데이터를 구분하기 위한 데이터 식별자를 가져야한다.
- 데이터 식별자 ==> Primary Key

2. 제1정규화
- 중복 컬럼이나 중복 데이터가 있다면 별도의 테이블로 분리한다.
- 그 테이블과 부모<-->자식 관계를 맺는다.
- 자식 테이블 쪽에 부모 테이블의 데이터를 참조하기 위한 
   외부키(foreign key)를 둔다.

3. 제2정규화
- 두 개 이상의 PK 컬럼으로 구성된 경우,
  나머지 일반 컬럼은 모두 그 PK 컬럼들에 종속되어야 하는데,
  만약 PK에 종속되지 않은 컬럼이 있다면 별도 테이블로 분리한다.
- 부모<-->자식 관계를 맺는다.

4. 제3정규화
- PK에 종속되지 않은 일반 컬럼이 있다면 별도 테이블로 분리한다.
- PK에 종속되지 않는다?
  PK가 바뀔 때 해당 컬럼이 바뀌는 것이 아니라,
  다른 컬럼의 값이 바뀔 때 해당 컬럼의 값이 바뀌는 경우, 
- 부모<-->자식 관계를 맺는다.

5. 관계의 수량을 지정한다.
- 부모-자식 간의 관계를 맺을 때 수량을 지정한다.
- 수량
0개 이상: *    ---> 1:다 (null)
1개 이상: 1..* ---> 1:다 (not null)
1개	  : 1	 ---> 1:1 (not null)
0또는 1: 0..1	 ---> 1:1 (null)

6. 제약 조건 지정 
1)Unique 컬럼 지정한다.
- 비록 PK는 아니지만 값이 중복되어서는 안되는 컬럼.
2)Index 컬럼을 지정한다.
- 검색 조건으로 자주 사용하는 컬럼에 대해 색인표를 생성
- select할 때 빠르다.
- 단 값을 바꿀 때 마다 색인표를 재생성해야 하기 때문에
  insert, update, delete 속도가 느려진다.
- 조회를 주로 하는 테이블에 적합하다.
- Primary Key나 Unique 컬럼은 색인표가 자동으로 생성된다. 
2)Not Null 컬럼을 지정한다.
- 필수 입력 컬럼을 지정한다.

# 물리 모델링 
논리 모델을 물리 모델로 변경한다.
1. 테이블명과 컬럼명을 모두 영어로 바꾼다.
- 이름은 약어로 구성하고, 
  여러 단어로 이루어진 이름은 '_'를 사용하여 구분한다.
  
2. 도메인 정의 
- 유사한 컬럼을 하나의 그룹으로 묶어 정의한다.
- 각 컬럼에 도메인을 지정한다.

3. SQL 문 생성
- 모델링을 이용하여 해당 DBMS에 맞는 SQL문을 생성한다.
  "forward engineering"
   
# 부모 - 자식 관계
- 참조하는 쪽이 자식이고 참조 당하는 쪽이 부모 테이블이다.
- 자식테이블 쪽에 부모의 PK 값을 저장할 컬럼을 만든다. 
- 1(부모):다(자식) 관계를 맺는다.
- 자식 테이블에 데이터를 넣을 때 부모 테이블에 존재하지 않는
  데이터를 가리킬 수 없다. 
  <--- 제약조건(constraints)이라 부른다.
- 이런 제약조건을 통해 무효한 데이터가 입력되는 것을 방지할 수 있다.
  => 무결성 제약조건 

# 테이블 간의 관계
1. 비식별 관계(non-identifying)
   - FK != PK
   - 외부키가 해당 테이블에서 일반 컬럼이다.
2. 식별 관계(identifying)
   - FK == PK
   - 외부키가 해당 테이블에서 PK로 사용된다.

# 다대다 관계
- 다대다 관계는 DBMS에서 다룰 수 없다.
- 다대다 관계는 일대다 관계로 변경해야 한다.
- 방법: 관계 테이블을 추가하여 일대다 관계를 맺는다.
 

























